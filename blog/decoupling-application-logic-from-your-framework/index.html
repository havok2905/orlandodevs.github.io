<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    
    <title>Decoupling application logic from your framework</title>
    <meta property="og:title" content="Decoupling application logic from your framework" />

    
    
    <meta name="description" content="How to decouple application logic from your framework to make your angular apps more modular and testable.">
    <meta property="og:description" content="How to decouple application logic from your framework to make your angular apps more modular and testable." />
    <meta property="og:type" content="article" />
    

    
    <meta property="og:image" content="https://orlandodevs.com/assets/odevs-helmet.png">
    <meta property="og:url" content="https://orlandodevs.com/blog/decoupling-application-logic-from-your-framework/" />

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://orlandodevs.com/blog/decoupling-application-logic-from-your-framework/">
</head>


  <body class="oc">

    

<header class="oc-layout-header">
  <a href="/" class="oc-logo">
    <img src="/assets/odevs-logo.png" alt="Orlando Devs" width="600" height="116" />
  </a>
</header>


    <main class="oc-layout-page">
      

<div class="post">

  <header class="post-header">
    <h1 class="post-title">Decoupling application logic from your framework</h1>
    <p class="post-meta">Mar 22, 2016 • David Brown</p>
  </header>

  <article class="post-content">
    <p>In recent years, JavaScript has evolved at a rapid pace. So rapid that any application you’re working on as you read this will be nearly deprecated by the time you launch it. Okay, that might be a <em>bit</em> hyperbolic but at the very least something newer and better will be available. This speed has prompted me to think of new ways to approach front-end applications to yield maximum reusability across frameworks by refactoring the core logic of the application into self-contained ES6 modules.</p>

<p>A goal in writing any application should be to write the application logic outside the framework then within your framework write a wrapper to use your module. This facilitates the migration process between frameworks and versions.</p>

<h2 id="the-why">The Why</h2>

<h4 id="more-testable-code">More testable code</h4>
<p>When the logic is separated into it’s own pure JavaScript module instead of defined in the framework, the tests can be run on just the module without the overhead of the framework. For example, with Angular, the controller functions can be split into their own modules so that when the tests are run, only the controller function is being tested. This keeps the framework out of the tests which makes the test cleaner, easier to run and maintain, and yields to my next point of modularity and reusability.</p>

<h4 id="modularity-and-maintainability">Modularity and maintainability</h4>
<p>One issue that the JavaScript community suffers from, is a proclivity to reinvention of the wheel. Try to find a modal library - there are dozens of them. This approach lets you (or another developer if you open source it - and you should open source your modules when applicable) reuse it in future projects. These modules should be small enough to allow other developers to easily contribute to your module. This modularity promotes an easier path for migrations to new frameworks as well.</p>

<h4 id="migration-path">Migration path</h4>

<p>The examples below suggests that you can inject your framework-specific libraries into your extracted module. You <em>can</em> do this but I would suggest against it in place of using another framework-agnostic library from the start and locking the version of the dependency. Then during a migration, you can run your tests to verify that it still works and refactor if not. There will be times when you will have to fix the module upon migration to allow for an updated injected library since updating libraries during a migration is an opportune time to do so. In most cases, fixing a module is a lot easier than re-writing the whole module.</p>

<p>Even better than injecting libraries, I suggest using built in browser functions. In the case of Angular’s <code>$http</code>, I suggest using the browser’s <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"><code>fetch()</code></a> function (and Github’s <a href="https://github.com/github/fetch">fetch polyfill</a> for not yet supported browsers). Then when the module is used elsewhere, it works exactly as it did to begin with because it has no reliance on a specific framework.</p>

<h2 id="the-how">The How</h2>

<p>Let’s say we are building an Angular app with a controller named BusinessCtrl and we want to integrate a pure JavaScript BusinessLogic module. Here are a few ways to do this which allow easier migrations to Angular 2 (using <a href="https://toddmotto.com/digging-into-angulars-controller-as-syntax/">controller-as syntax</a> in the 1.x examples). The following examples are not just limited to exported classes but can also be used when exporting a function from a module.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Defining your module - BusinessLogic.js</span>
<span class="c1">// you could import alternatives to framework-specific libraries here</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">BusinessLogic</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="cm">/* injected libraries here */</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">doLogic</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ..</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h4 id="one-approach">One approach:</h4>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Defining the controller</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">BusinessLogic</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./BusinessLogic&#39;</span><span class="p">;</span>
<span class="kr">class</span> <span class="nx">MyCtrl</span> <span class="kr">extends</span> <span class="nx">BusinessLogic</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;your-module&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;MyCtrl&#39;</span><span class="p">,</span> <span class="nx">MyCtrl</span><span class="p">);</span></code></pre></div>

<h4 id="a-better-approach-by-skipping-the-boilerplate">A better approach by skipping the boilerplate:</h4>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span><span class="nx">BusinessLogic</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./BusinessLogic&#39;</span><span class="p">;</span>
<span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;your-module&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;MyCtrl&#39;</span><span class="p">,</span> <span class="nx">BusinessLogic</span><span class="p">);</span></code></pre></div>

<h4 id="using-your-module-with-directives-or-angular-15s-components">Using your module with directives or Angular 1.5’s components:</h4>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span><span class="nx">BusinessLogic</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./BusinessLogic&#39;</span><span class="p">;</span>
<span class="c1">// return a newly instantiated module in the controller of your returned object</span>
<span class="nx">controller</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">BusinessLogic</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// better approach (less boilerplate)</span>
<span class="nx">controller</span><span class="o">:</span> <span class="nx">BusinessLogic</span></code></pre></div>

<p>Now let’s compare this to the <a href="http://learnangular2.com/components/">component syntax for Angular 2</a>.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;angular2/angular2&#39;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;my-component&#39;</span><span class="p">,</span>
  <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;&lt;div&gt;Hello my name is . &lt;button (click)=&quot;sayMyName()&quot;&gt;Say my name&lt;/button&gt;&lt;/div&gt;&#39;</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">MyComponent</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;Max&#39;</span>
  <span class="p">}</span>
  <span class="nx">sayMyName</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;My name is&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>You’ll notice that the MyComponent class looks an awful lot like the BusinessLogic class in the first example. This creates the reusability factor mentioned in the beginning of this article and makes migrations from framework to framework (or updated versions of your framework) that much easier.</p>

<p>One caveat to the approach for modularity is that you end up with multiple instances of your module. Behind the scenes each time it’s being called, it’s instantiating a new object. To avoid this you could use a <a href="https://en.wikipedia.org/wiki/Singleton_pattern">singleton</a> (<a href="http://amanvirk.me/singleton-classes-in-es6/">example in ES6</a>). Be careful when using singletons though as they are considered an <a href="https://en.wikipedia.org/wiki/Anti-pattern">anti-pattern</a> and generally considered poor practice to use.</p>

<p>Another caveat is when you have to call <code>$scope.$apply()</code>. In this case, you will need to inject <code>$scope</code> into your module to allow you to run this. This is an easy refactor when migrating though because it is easy to find and remove these calls.</p>

<p>I hope I’ve inspired you to think more critically about the way you approach your applications. I would thoroughly enjoy hearing your thoughts on this pattern as well as suggestions for improvement.</p>

<h4 id="tldr">tl;dr</h4>
<p>Writing your modules outside the framework lets you test them easier, creates more modular/reusable code, and yields to easier migrations from framework to framework and updating versions of a framework.</p>

  </article>

  
<footer class="post-author">

  
  <figure class="post-author-image">
    <span class="img" style="background-image: url(https://twitter.com/theonetheonlydb/profile_image?size=original)"></span>
  </figure>
  

  <div class="post-author-name">
  
    <span>David Brown</span>
  
  </div>

  
    <div class="post-author-bio">David is a front-end developer in Orlando, FL with a passion for creating quality code and keeping up with the latest development standards and tools.
</div>
  

  <ul class="social-media-list">

  
    <li>
      <a href="https://twitter.com/theonetheonlydb" target="_blank">
        <span class="icon  icon--twitter">
          <svg viewBox="0 0 16 16">
            <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
            c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
          </svg>
        </span>

        <span class="username">theonetheonlydb</span>
      </a>
    </li>
  

  
    <li>
      <a href="https://github.com/theonetheonlydavidbrown" target="_blank">
        <span class="icon  icon--github">
          <svg viewBox="0 0 16 16">
            <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
          </svg>
        </span>

        <span class="username">theonetheonlydavidbrown</span>
      </a>
    </li>
  

  </ul>


</footer>



</div>


      

    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Orlando Devs</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Orlando Devs</li>
          <li><a href="mailto:orlandodevcommunity@gmail.com">orlandodevcommunity@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/OrlandoDevs">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">OrlandoDevs</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/OrlandoDevs">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">OrlandoDevs</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Official account for the Orlando Devs Community! We are an inclusive community, open to everyone who has a passion in software development in the Orlando area.
</p>
      </div>
    </div>

  </div>

</footer>


    

  </body>

</html>
